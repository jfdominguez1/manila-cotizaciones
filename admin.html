<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cotizaciones Manila ‚Äî Admin</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='85'>üêü</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<nav class="topnav">
  <img src="img/logo-manila.png" alt="Manila" class="nav-logo">
  <span class="nav-title">Cotizaciones</span>
  <div class="nav-links">
    <a href="index.html">Dashboard</a>
    <div class="nav-dropdown">
      <button class="nav-dropdown-label">Export <span class="nav-dropdown-arrow">‚ñæ</span></button>
      <div class="nav-dropdown-menu">
        <a href="quote.html">Nueva Export</a>
        <a href="history.html">Historial Export</a>
      </div>
    </div>
    <div class="nav-dropdown">
      <button class="nav-dropdown-label">Local <span class="nav-dropdown-arrow">‚ñæ</span></button>
      <div class="nav-dropdown-menu">
        <a href="quote-local.html">Nueva Local</a>
        <a href="history-local.html">Historial Local</a>
      </div>
    </div>
    <a href="admin.html" class="active">Admin</a>
  </div>
  <div class="nav-right">
    <span class="nav-version">v2.3.4</span>
    <span class="nav-user" id="nav-user"></span>
    <button class="btn-logout" id="btn-logout">Salir</button>
  </div>
</nav>

<div class="admin-page">
  <h1>Administraci√≥n</h1>

  <div class="admin-tabs">
    <button class="admin-tab active" data-tab="products">Productos Export</button>
    <button class="admin-tab" data-tab="products-local">Productos Local</button>
    <button class="admin-tab" data-tab="costs">Tablas de costos</button>
  </div>

  <!-- TAB: PRODUCTOS -->
  <div class="admin-tab-content active" id="tab-products">
    <div class="admin-list-header">
      <h2>Cat√°logo de productos</h2>
      <button class="btn-primary" id="btn-new-product">Ôºã Nuevo producto</button>
    </div>

    <!-- Formulario producto -->
    <div class="admin-form-panel" id="product-form-panel">
      <h3 id="product-form-title">Nuevo producto</h3>
      <div class="admin-form-grid">
        <div class="admin-form-field">
          <label>Nombre del producto *</label>
          <input type="text" id="p-name" placeholder="Fresh Natural Fillet">
        </div>
        <div class="admin-form-field">
          <label>Presentaci√≥n</label>
          <input type="text" id="p-presentation" placeholder="Fillet / Whole / Smoked...">
        </div>
        <div class="admin-form-field">
          <label>Especie</label>
          <input type="text" id="p-species" placeholder="Rainbow Trout (Oncorhynchus mykiss)">
        </div>
        <div class="admin-form-field">
          <label>Corte / Trim</label>
          <input type="text" id="p-trim" placeholder="Trim D ‚Äî Skin On, Pin Bone Out">
        </div>
        <div class="admin-form-field caliber-field" style="grid-column:1/-1">
          <label>Calibres disponibles</label>
          <div class="caliber-builder" id="caliber-builder"></div>
          <button type="button" id="btn-add-caliber" class="btn-add-caliber">Ôºã Agregar calibre</button>
        </div>
        <div class="admin-form-field">
          <label>Rendimiento por defecto (%)</label>
          <input type="text" inputmode="decimal" id="p-yield" placeholder="50">
        </div>
        <div class="admin-form-field">
          <label>Orden de visualizaci√≥n</label>
          <input type="number" id="p-order" placeholder="0" min="0">
        </div>
      </div>
      <!-- Foto principal -->
      <div class="admin-form-field" style="grid-column:1/-1">
        <label>Foto principal</label>
        <div class="photo-picker">
          <div class="photo-picker-preview" id="p-photo-preview">
            <span class="photo-picker-empty">Sin foto seleccionada</span>
          </div>
          <div class="photo-picker-gallery" id="p-photo-gallery"></div>
        </div>
      </div>

      <div class="admin-form-grid single">
        <div class="admin-form-field">
          <label>Notas / descripci√≥n</label>
          <textarea id="p-notes" placeholder="Descripci√≥n breve del producto para el PDF..."></textarea>
          <div class="suggestions-bar">
            <button type="button" class="btn-suggest" id="btn-suggest-desc">‚ú¶ Sugerir descripciones</button>
            <div class="suggestions-list" id="suggestions-list"></div>
          </div>
        </div>
      </div>
      <div class="admin-form-field" style="margin-bottom:16px">
        <label>Certificaciones</label>
        <div class="cert-checkboxes">
          <label><input type="checkbox" value="bap" class="cert-check"> BAP Certified</label>
          <label><input type="checkbox" value="oie" class="cert-check"> OIE Compliant</label>
          <label><input type="checkbox" value="ecocert" class="cert-check"> Ecocert Audited</label>
        </div>
      </div>
      <div class="admin-form-actions">
        <button class="btn-primary" id="btn-save-product">Guardar producto</button>
        <button class="btn-secondary" id="btn-cancel-product">Cancelar</button>
        <button class="btn-danger" id="btn-delete-product" style="margin-left:auto;display:none">Eliminar</button>
      </div>
    </div>

    <!-- Lista de productos -->
    <div class="admin-cards" id="products-list">
      <div class="empty-state"><div class="empty-icon">üì¶</div><p>Cargando...</p></div>
    </div>
  </div>

  <!-- TAB: PRODUCTOS LOCAL -->
  <div class="admin-tab-content" id="tab-products-local">
    <div class="admin-list-header">
      <h2>Cat√°logo de productos ‚Äî Mercado Local</h2>
      <button class="btn-primary" id="btn-new-product-local">Ôºã Nuevo producto local</button>
    </div>

    <!-- Formulario producto local -->
    <div class="admin-form-panel" id="product-local-form-panel">
      <h3 id="product-local-form-title">Nuevo producto local</h3>
      <div class="admin-form-grid">
        <div class="admin-form-field">
          <label>Nombre del producto *</label>
          <input type="text" id="pl-name" placeholder="Filet de trucha fresco">
        </div>
        <div class="admin-form-field">
          <label>Presentaci√≥n</label>
          <input type="text" id="pl-presentation" placeholder="Filet / Entero / Ahumado...">
        </div>
        <div class="admin-form-field">
          <label>Especie</label>
          <input type="text" id="pl-species" placeholder="Trucha Arco√≠ris (Oncorhynchus mykiss)">
        </div>
        <div class="admin-form-field">
          <label>Corte</label>
          <input type="text" id="pl-trim" placeholder="Con piel, sin espinas">
        </div>
        <div class="admin-form-field">
          <label>Calibres</label>
          <input type="text" id="pl-caliber" placeholder="200-400 g, 400-600 g">
        </div>
        <div class="admin-form-field">
          <label>Rendimiento por defecto (%)</label>
          <input type="text" inputmode="decimal" id="pl-yield" placeholder="50">
        </div>
        <div class="admin-form-field">
          <label>Orden de visualizaci√≥n</label>
          <input type="number" id="pl-order" placeholder="0" min="0">
        </div>
        <div class="admin-form-field">
          <label>Unidad de venta</label>
          <input type="text" id="pl-unit" placeholder="kg / caja de 5 kg / bandeja">
        </div>
        <div class="admin-form-field">
          <label>Conservaci√≥n</label>
          <select id="pl-conservation">
            <option value="">‚Äî Seleccionar ‚Äî</option>
            <option value="refrigerado">Refrigerado</option>
            <option value="congelado">Congelado</option>
          </select>
        </div>
        <div class="admin-form-field">
          <label>D√≠as de duraci√≥n</label>
          <input type="number" id="pl-shelf-life" placeholder="15" min="1">
        </div>
        <div class="admin-form-field">
          <label>Etiqueta de marca</label>
          <select id="pl-label-brand">
            <option value="">Sin etiqueta</option>
            <option value="manila">Manila S.A.</option>
            <option value="patagonia">Patagonia Exquisiteces</option>
            <option value="andes">Andes Natural Fish</option>
          </select>
        </div>
      </div>
      <!-- Foto principal -->
      <div class="admin-form-field" style="grid-column:1/-1">
        <label>Foto principal</label>
        <div class="photo-picker">
          <div class="photo-picker-preview" id="pl-photo-preview">
            <span class="photo-picker-empty">Sin foto seleccionada</span>
          </div>
          <div class="photo-picker-gallery" id="pl-photo-gallery"></div>
        </div>
      </div>
      <div class="admin-form-grid single">
        <div class="admin-form-field">
          <label>Notas / descripci√≥n</label>
          <textarea id="pl-notes" placeholder="Descripci√≥n del producto para la cotizaci√≥n..."></textarea>
          <div class="suggestions-bar">
            <button type="button" class="btn-suggest" id="btn-suggest-desc-local">‚ú¶ Sugerir descripciones</button>
            <div class="suggestions-list" id="suggestions-list-local"></div>
          </div>
        </div>
      </div>
      <div class="admin-form-actions">
        <button class="btn-primary" id="btn-save-product-local">Guardar producto</button>
        <button class="btn-secondary" id="btn-cancel-product-local">Cancelar</button>
        <button class="btn-danger" id="btn-delete-product-local" style="margin-left:auto;display:none">Eliminar</button>
      </div>
    </div>

    <!-- Lista de productos locales -->
    <div class="admin-cards" id="products-local-list">
      <div class="empty-state"><div class="empty-icon">üì¶</div><p>Cargando...</p></div>
    </div>
  </div>

  <!-- TAB: TABLAS DE COSTOS -->
  <div class="admin-tab-content" id="tab-costs">
    <div class="admin-list-header">
      <h2>Tablas de referencia de costos</h2>
      <div style="display:flex;gap:8px">
        <button class="btn-secondary" id="btn-export-costs">üìä Exportar CSV</button>
        <button class="btn-primary" id="btn-new-cost">Ôºã Nuevo √≠tem</button>
      </div>
    </div>

    <!-- Formulario costo -->
    <div class="admin-form-panel" id="cost-form-panel">
      <h3 id="cost-form-title">Nuevo √≠tem de costo</h3>
      <div class="admin-form-grid">
        <div class="admin-form-field">
          <label>Nombre *</label>
          <input type="text" id="c-name" placeholder="Flete BHC ‚Üí EZE">
        </div>
        <div class="admin-form-field">
          <label>Capa de costo</label>
          <select id="c-layer">
            <option value="raw_material">Materia Prima</option>
            <option value="processing">Proceso en Planta</option>
            <option value="packaging">Materiales y Embalaje</option>
            <option value="transport">Transporte Interno</option>
            <option value="export">Costos de Exportaci√≥n</option>
            <option value="distribution">Distribuci√≥n (Local)</option>
            <option value="other">Otros</option>
          </select>
        </div>
        <div class="admin-form-field">
          <label>Moneda</label>
          <select id="c-currency">
            <option value="USD">USD</option>
            <option value="ARS">ARS $</option>
          </select>
        </div>
        <div class="admin-form-field">
          <label>Valor variable</label>
          <input type="text" inputmode="decimal" id="c-value" placeholder="0.00">
        </div>
        <div class="admin-form-field">
          <label>Unidad</label>
          <select id="c-unit">
            <option value="kg">/kg</option>
            <option value="unit">/unidad</option>
            <option value="box">/caja</option>
            <option value="load">/carga</option>
            <option value="pct_cost">% sobre costo</option>
            <option value="pct_price">% sobre precio</option>
          </select>
        </div>
        <div class="admin-form-field" id="c-unitkg-wrap">
          <label>kg por unidad/caja</label>
          <input type="text" inputmode="decimal" id="c-unitkg" placeholder="10">
        </div>
        <div class="admin-form-field">
          <label>Fijo por embarque ($)</label>
          <input type="text" inputmode="decimal" id="c-fixed-ship" placeholder="0">
        </div>
        <div class="admin-form-field">
          <label>Fijo por cotizaci√≥n ($)</label>
          <input type="text" inputmode="decimal" id="c-fixed-quote" placeholder="0">
        </div>
        <div class="admin-form-field">
          <label>Notas</label>
          <input type="text" id="c-notes" placeholder="Condiciones, proveedor, fecha de vigencia...">
        </div>
      </div>
      <div class="admin-form-actions">
        <button class="btn-primary" id="btn-save-cost">Guardar</button>
        <button class="btn-secondary" id="btn-cancel-cost">Cancelar</button>
        <button class="btn-danger" id="btn-delete-cost" style="margin-left:auto;display:none">Eliminar</button>
      </div>
    </div>

    <!-- Lista de √≠tems de costo -->
    <div id="costs-list">
      <div class="empty-state"><div class="empty-icon">üí∞</div><p>Cargando...</p></div>
    </div>
  </div>

</div>

<script type="module" src="js/admin.js?v=23"></script>
</body>
</html>
