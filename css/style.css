/* ============================================================
   COTIZACIONES MANILA — Estilos
   ============================================================ */

/* --- Variables --- */
:root {
  --carbon:        #2F2C2B;
  --green:         #40543B;
  --blue:          #365A6E;
  --orange:        #C94707;
  --gray-50:       #f9f9f8;
  --gray-100:      #f2f1ef;
  --gray-200:      #e5e3e0;
  --gray-300:      #ccc9c4;
  --gray-500:      #888480;
  --gray-700:      #4a4744;
  --accent:        var(--carbon);
  --accent-light:  #eaeaea;
  --radius:        6px;
  --panel-w:       400px;
  --font:          'Inter', system-ui, sans-serif;
}

/* --- Reset --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 14px; }
body {
  font-family: var(--font);
  background: var(--gray-100);
  color: var(--carbon);
  min-height: 100vh;
}

/* ============================================================
   LOGIN PAGE
   ============================================================ */
.login-page {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: var(--carbon);
}
.login-card {
  background: #fff;
  border-radius: 12px;
  padding: 40px 48px;
  width: 360px;
  box-shadow: 0 8px 40px rgba(0,0,0,0.3);
}
.login-card .login-logo {
  display: block;
  height: 48px;
  margin: 0 auto 32px;
}
.login-card h1 {
  font-size: 18px;
  font-weight: 600;
  text-align: center;
  margin-bottom: 8px;
}
.login-card .login-sub {
  font-size: 12px;
  color: var(--gray-500);
  text-align: center;
  margin-bottom: 28px;
}
.login-card .form-group {
  margin-bottom: 16px;
}
.login-card label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  margin-bottom: 6px;
  color: var(--gray-700);
}
.login-card input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 14px;
  font-family: var(--font);
  outline: none;
  transition: border-color 0.15s;
}
.login-card input:focus { border-color: var(--accent); }
.login-card .btn-primary {
  width: 100%;
  margin-top: 8px;
}
.login-error {
  color: var(--orange);
  font-size: 12px;
  text-align: center;
  margin-top: 12px;
  min-height: 18px;
}

/* ============================================================
   TOP NAV
   ============================================================ */
.topnav {
  background: var(--carbon);
  color: #fff;
  height: 64px;
  display: flex;
  align-items: center;
  padding: 0 20px;
  gap: 24px;
  position: sticky;
  top: 0;
  z-index: 100;
}
.topnav .nav-logo {
  height: 44px;
  opacity: 0.95;
}
.topnav .nav-title {
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.3px;
  color: rgba(255,255,255,0.9);
}
.topnav .nav-links {
  display: flex;
  gap: 4px;
  margin-left: 8px;
}
.topnav .nav-links a {
  color: rgba(255,255,255,0.65);
  text-decoration: none;
  font-size: 13px;
  padding: 6px 12px;
  border-radius: 4px;
  transition: all 0.15s;
}
.topnav .nav-links a:hover,
.topnav .nav-links a.active {
  background: rgba(255,255,255,0.12);
  color: #fff;
}
.topnav .nav-right {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 12px;
}
.topnav .nav-user {
  font-size: 12px;
  color: rgba(255,255,255,0.5);
}
.topnav .nav-version {
  font-size: 10px;
  color: rgba(255,255,255,0.35);
  background: rgba(255,255,255,0.1);
  border-radius: 4px;
  padding: 2px 7px;
  font-family: monospace;
  letter-spacing: 0.3px;
}
.topnav .btn-logout {
  background: none;
  border: 1px solid rgba(255,255,255,0.2);
  color: rgba(255,255,255,0.7);
  padding: 5px 12px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  font-family: var(--font);
  transition: all 0.15s;
}
.topnav .btn-logout:hover { border-color: rgba(255,255,255,0.5); color: #fff; }

/* ============================================================
   BOTONES COMUNES
   ============================================================ */
.btn-primary {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 9px 18px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  font-family: var(--font);
  cursor: pointer;
  transition: opacity 0.15s;
}
.btn-primary:hover { opacity: 0.85; }
.btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }

.btn-secondary {
  background: #fff;
  color: var(--carbon);
  border: 1px solid var(--gray-200);
  padding: 9px 18px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  font-family: var(--font);
  cursor: pointer;
  transition: border-color 0.15s, background 0.15s;
}
.btn-secondary:hover { border-color: var(--gray-400); background: var(--gray-50); }

.btn-danger {
  background: none;
  color: var(--orange);
  border: 1px solid var(--orange);
  padding: 6px 12px;
  border-radius: var(--radius);
  font-size: 12px;
  cursor: pointer;
  font-family: var(--font);
  transition: all 0.15s;
}
.btn-danger:hover { background: var(--orange); color: #fff; }

.btn-icon {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 4px;
  color: var(--gray-500);
  font-size: 16px;
  line-height: 1;
  transition: color 0.15s, background 0.15s;
}
.btn-icon:hover { color: var(--orange); background: #fef1ec; }

.btn-add {
  background: none;
  border: 1px dashed var(--gray-300);
  color: var(--gray-500);
  padding: 7px 14px;
  border-radius: var(--radius);
  font-size: 12px;
  font-family: var(--font);
  cursor: pointer;
  width: 100%;
  text-align: center;
  transition: all 0.15s;
  margin-top: 6px;
}
.btn-add:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }

/* ============================================================
   DASHBOARD (index.html)
   ============================================================ */
.dashboard-page { padding: 32px 40px; }
.dashboard-page h1 { font-size: 22px; font-weight: 600; margin-bottom: 6px; }
.dashboard-page .dash-sub { color: var(--gray-500); font-size: 13px; margin-bottom: 32px; }

.dash-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 40px;
}
.dash-card {
  background: #fff;
  border-radius: 10px;
  padding: 24px 28px;
  border: 1px solid var(--gray-200);
  text-decoration: none;
  color: var(--carbon);
  display: flex;
  flex-direction: column;
  gap: 8px;
  transition: box-shadow 0.15s, transform 0.15s;
}
.dash-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.08); transform: translateY(-1px); }
.dash-card .dash-card-icon { font-size: 28px; }
.dash-card .dash-card-title { font-size: 15px; font-weight: 600; }
.dash-card .dash-card-desc { font-size: 12px; color: var(--gray-500); line-height: 1.5; }

.dash-section-title {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.dash-section-title a {
  font-size: 12px;
  font-weight: 400;
  color: var(--gray-500);
  text-decoration: none;
  margin-left: auto;
}
.dash-section-title a:hover { color: var(--accent); }

/* ============================================================
   QUOTE BUILDER (quote.html)
   ============================================================ */
.quote-layout {
  display: flex;
  height: calc(100vh - 52px);
  overflow: hidden;
}

/* Panel izquierdo */
.quote-panel {
  width: var(--panel-w);
  min-width: var(--panel-w);
  background: #fff;
  border-right: 1px solid var(--gray-200);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}
.panel-header {
  padding: 16px 20px 12px;
  border-bottom: 1px solid var(--gray-200);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.panel-header h2 { font-size: 14px; font-weight: 600; }
.panel-header .quote-number {
  font-size: 11px;
  color: var(--gray-500);
  font-weight: 400;
}

.panel-section {
  padding: 16px 20px;
  border-bottom: 1px solid var(--gray-100);
}
.panel-section h3 {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--gray-500);
  margin-bottom: 12px;
}

/* Product selector */
.product-selector {
  display: flex;
  align-items: center;
  gap: 12px;
}
.product-thumb {
  width: 52px;
  height: 52px;
  border-radius: 6px;
  object-fit: cover;
  background: var(--gray-100);
  border: 1px solid var(--gray-200);
  flex-shrink: 0;
}
.product-thumb-placeholder {
  width: 52px;
  height: 52px;
  border-radius: 6px;
  background: var(--gray-100);
  border: 1px dashed var(--gray-300);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--gray-400);
  font-size: 20px;
  flex-shrink: 0;
}

/* Brand switcher */
.brand-switcher {
  display: flex;
  gap: 6px;
}
.brand-btn {
  flex: 1;
  padding: 7px 8px;
  border: 1px solid var(--gray-200);
  border-radius: 5px;
  background: #fff;
  font-size: 11px;
  font-family: var(--font);
  cursor: pointer;
  text-align: center;
  transition: all 0.15s;
  color: var(--gray-700);
  line-height: 1.3;
}
.brand-btn:hover { border-color: var(--gray-400); }
.brand-btn.active {
  border-color: var(--accent);
  background: var(--accent-light);
  color: var(--accent);
  font-weight: 500;
}

/* Form inputs en panel */
.form-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 10px;
}
.form-row:last-child { margin-bottom: 0; }
.form-row label {
  font-size: 11px;
  font-weight: 500;
  color: var(--gray-500);
}
.form-row input,
.form-row select,
.form-row textarea {
  padding: 7px 10px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  color: var(--carbon);
  background: #fff;
  outline: none;
  transition: border-color 0.15s;
  width: 100%;
}
.form-row input:focus,
.form-row select:focus,
.form-row textarea:focus { border-color: var(--accent); }
.form-row textarea { resize: vertical; min-height: 60px; }

.form-row-2col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 10px;
}
.form-row-2col label {
  font-size: 11px;
  font-weight: 500;
  color: var(--gray-500);
  margin-bottom: 4px;
  display: block;
}
.form-row-2col input,
.form-row-2col select {
  padding: 7px 10px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  color: var(--carbon);
  outline: none;
  width: 100%;
  transition: border-color 0.15s;
}
.form-row-2col input:focus,
.form-row-2col select:focus { border-color: var(--accent); }

/* Live summary */
.cost-summary {
  background: var(--gray-50);
  border-radius: 8px;
  padding: 14px;
  margin-bottom: 12px;
}
.cost-summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  padding: 3px 0;
  color: var(--gray-700);
}
.cost-summary-row.separator { border-top: 1px solid var(--gray-200); margin-top: 6px; padding-top: 8px; }
.cost-summary-row .label { color: var(--gray-500); }
.cost-summary-row .value { font-weight: 500; font-variant-numeric: tabular-nums; }

.price-highlight {
  background: var(--accent);
  color: #fff;
  border-radius: 8px;
  padding: 14px 16px;
  margin-bottom: 14px;
  text-align: center;
}
.price-highlight .price-label { font-size: 11px; opacity: 0.8; margin-bottom: 4px; }

.margin-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 14px;
}
.margin-row label { font-size: 12px; font-weight: 500; color: var(--gray-500); white-space: nowrap; flex: 1; }
.margin-row.target-price-row label { color: var(--accent); }
.margin-row input {
  width: 80px;
  padding: 7px 10px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 14px;
  font-family: var(--font);
  font-weight: 600;
  text-align: center;
  outline: none;
  transition: border-color 0.15s;
}
.margin-row input:focus { border-color: var(--accent); }
.margin-row .margin-hint { font-size: 11px; color: var(--gray-400); }
.margin-row input.field-computed {
  background: var(--gray-50);
  color: var(--gray-400);
  border-style: dashed;
}

/* Toggle fijar margen / precio */
.lock-toggle {
  display: flex;
  border: 1px solid var(--gray-200);
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 12px;
}
.lock-btn {
  flex: 1;
  padding: 5px 8px;
  font-size: 11px;
  font-weight: 500;
  border: none;
  background: transparent;
  cursor: pointer;
  color: var(--gray-500);
  font-family: var(--font);
  transition: background 0.15s, color 0.15s;
}
.lock-btn:hover { background: var(--gray-100); }
.lock-btn.active { background: var(--carbon); color: #fff; }

/* Advertencias de incoherencia */
.quote-warnings {
  display: none;
  margin-bottom: 10px;
  border-radius: 6px;
  overflow: hidden;
}
.quote-warning-item {
  background: #fff5f5;
  border-left: 3px solid #e53e3e;
  color: #c53030;
  font-size: 11px;
  font-weight: 500;
  padding: 7px 10px;
  line-height: 1.4;
  margin-bottom: 2px;
}
.quote-warning-item:last-child { margin-bottom: 0; }

.panel-actions {
  padding: 16px 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  border-top: 1px solid var(--gray-200);
  margin-top: auto;
}

/* Columna derecha — capas de costo */
.quote-layers {
  flex: 1;
  overflow-y: auto;
  padding: 20px 28px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.layer-section {
  background: #fff;
  border-radius: 10px;
  border: 1px solid var(--gray-200);
  overflow: hidden;
  flex-shrink: 0;
}
.layer-header {
  display: flex;
  align-items: center;
  padding: 13px 16px;
  cursor: pointer;
  user-select: none;
  gap: 10px;
  transition: background 0.1s;
}
.layer-header:hover { background: var(--gray-50); }
.layer-header .layer-toggle { font-size: 12px; color: var(--gray-400); transition: transform 0.15s; }
.layer-header.collapsed .layer-toggle { transform: rotate(-90deg); }
.layer-header h3 { font-size: 13px; font-weight: 600; flex: 1; }
.layer-header .layer-total {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  font-variant-numeric: tabular-nums;
}
.layer-header .layer-yield-badge {
  font-size: 10px;
  background: var(--accent-light);
  color: var(--accent);
  padding: 2px 8px;
  border-radius: 20px;
  font-weight: 500;
}

.layer-body {
  padding: 0 16px 14px;
  border-top: 1px solid var(--gray-100);
}

/* Ítem de costo — tarjeta de 2 filas */
.cost-item {
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: 6px;
  padding: 8px 10px;
  margin-bottom: 6px;
  font-size: 12px;
}
.cost-item:last-of-type { margin-bottom: 0; }

.cost-item-row1 {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}
.cost-item-row1 .item-name {
  flex: 1;
  min-width: 0;
}
.cost-item-row2 {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}
.cost-item-row2 .item-field {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.cost-item-row2 .item-field label {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  color: var(--gray-400);
  white-space: nowrap;
}
.cost-item-row2 .item-field.field-value  { width: 80px; }
.cost-item-row2 .item-field.field-unit   { width: 100px; }
.cost-item-row2 .item-field.field-unitkg { width: 70px; }
.cost-item-row2 .item-field.field-fship  { width: 80px; }
.cost-item-row2 .item-field.field-fquote { width: 80px; }

.cost-item input,
.cost-item select {
  padding: 5px 8px;
  border: 1px solid var(--gray-200);
  border-radius: 4px;
  font-size: 12px;
  font-family: var(--font);
  color: var(--carbon);
  outline: none;
  width: 100%;
  transition: border-color 0.12s;
  background: #fff;
}
.cost-item input:focus,
.cost-item select:focus { border-color: var(--accent); }

.cost-item .item-result {
  margin-left: auto;
  font-size: 13px;
  font-weight: 700;
  color: var(--accent);
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  align-self: flex-end;
  padding-bottom: 1px;
}
.cost-item .item-result.na { color: var(--gray-400); font-weight: 400; font-size: 11px; }

/* Header de columnas — ya no necesario con tarjetas */
.cost-items-header { display: none; }

/* Badge de moneda */
.currency-badge {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.3px;
  white-space: nowrap;
}
.currency-badge.usd { background: #dce9f0; color: #365A6E; }
.currency-badge.ars { background: #fef3cd; color: #7c5a00; }

/* Toggle de moneda en ítem de cotización */
.currency-toggle {
  display: flex;
  border: 1px solid var(--gray-200);
  border-radius: 4px;
  overflow: hidden;
  flex-shrink: 0;
}
.currency-toggle button {
  padding: 5px 7px;
  border: none;
  background: #fff;
  font-size: 11px;
  font-weight: 500;
  font-family: var(--font);
  cursor: pointer;
  color: var(--gray-500);
  transition: all 0.12s;
  white-space: nowrap;
}
.currency-toggle button.active {
  background: #dce9f0;
  color: #365A6E;
  font-weight: 700;
}
.currency-toggle button.active.ars-active {
  background: #fef3cd;
  color: #7c5a00;
}

/* Ítem en ARS — borde amarillo */
.cost-item.ars-item {
  border-left: 3px solid #f59e0b;
}

/* Resultado ARS */
.item-result .ars-raw {
  display: block;
  font-size: 9px;
  font-weight: 600;
  color: #7c5a00;
  line-height: 1.3;
}
.item-result .ars-usd {
  display: block;
  font-size: 11px;
  font-weight: 700;
  color: var(--accent);
  line-height: 1.3;
}
.item-result .ars-notc {
  display: block;
  font-size: 9px;
  color: var(--orange);
  font-weight: 600;
}

/* Campo tipo de cambio — warning */
#usd-ars-rate.rate-warning {
  border-color: var(--orange) !important;
  background: #fef1ec;
  box-shadow: 0 0 0 2px rgba(201,71,7,0.15);
}
label.rate-warning-label {
  color: var(--orange);
  font-weight: 600;
}

/* Resumen: nota ARS */
.cost-summary-row.ars-rate-note .label { color: #7c5a00; font-style: italic; }
.cost-summary-row.ars-rate-note .value { color: #7c5a00; font-weight: 600; }
.cost-summary-row.ars-rate-warn .label { color: var(--orange); }
.cost-summary-row.ars-rate-warn .value { color: var(--orange); }

/* Fuente: manual / tabla */
.source-toggle {
  display: flex;
  border: 1px solid var(--gray-200);
  border-radius: 4px;
  overflow: hidden;
}
.source-toggle button {
  flex: 1;
  padding: 5px 4px;
  border: none;
  background: #fff;
  font-size: 10px;
  font-family: var(--font);
  cursor: pointer;
  color: var(--gray-500);
  transition: all 0.12s;
}
.source-toggle button.active {
  background: var(--accent-light);
  color: var(--accent);
  font-weight: 600;
}

/* Comisión — sección especial */
.commission-section {
  background: #fff;
  border-radius: 10px;
  border: 1px solid var(--gray-200);
  padding: 16px;
  flex-shrink: 0;
}
.commission-section h3 {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.commission-section h3 .comm-total {
  font-size: 12px;
  color: var(--accent);
  font-variant-numeric: tabular-nums;
}
.commission-grid {
  display: grid;
  grid-template-columns: 80px 120px 100px 100px;
  gap: 8px;
  align-items: end;
}
.commission-grid label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  color: var(--gray-400);
  display: block;
  margin-bottom: 4px;
}
.commission-grid input,
.commission-grid select {
  padding: 7px 10px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  color: var(--carbon);
  outline: none;
  width: 100%;
  transition: border-color 0.15s;
}
.commission-grid input:focus,
.commission-grid select:focus { border-color: var(--accent); }

/* ============================================================
   PANEL: precio ambas unidades + cert picker
   ============================================================ */
.price-both {
  display: flex;
  align-items: baseline;
  justify-content: center;
  gap: 8px;
  margin-top: 2px;
}
.price-both .price-kg,
.price-both .price-lb { font-size: 17px; font-weight: 700; }
.price-both .price-sep { font-size: 14px; opacity: 0.5; }
.price-highlight .price-label { font-size: 11px; opacity: 0.8; margin-bottom: 4px; }

/* ============================================================
   PDF / PRINT
   ============================================================ */
.pdf-container { display: none; }

@media print {
  @page { size: A4 portrait; margin: 0; }

  body > *:not(.pdf-container) { display: none !important; }
  .pdf-container { display: block !important; }

  /* PDF Cliente: solo página cliente */
  body.print-client .pdf-internal-page { display: none !important; }
  /* PDF Costos: ambas páginas (interna primero, cliente después con inscripción) */

  .pdf-page {
    width: 210mm;
    min-height: 297mm;
    padding: 11mm 14mm 22mm;
    background: #fff;
    page-break-after: always;
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
    position: relative;
    color: #2F2C2B;
  }
  .pdf-page:last-child { page-break-after: auto; }

  /* ---- INSCRIPCIÓN "COPIA ENVIADA AL CLIENTE" ---- */
  .pdf-copy-label { display: none; }
  body.print-internal .pdf-copy-label {
    display: block;
    text-align: center;
    font-size: 7pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--pdf-accent, #2F2C2B);
    border: 1px dashed var(--pdf-accent, #2F2C2B);
    border-radius: 3px;
    padding: 1.5mm 4mm;
    margin-bottom: 4mm;
    opacity: 0.5;
  }

  /* ---- HEADER — logos sobre la línea ---- */
  .pdf-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-bottom: 4mm;
    border-bottom: 2px solid var(--pdf-accent, #2F2C2B);
    margin-bottom: 2.5mm;
  }
  .pdf-brand-logo {
    max-height: 22mm;
    height: auto;
    max-width: 85mm;
    object-fit: contain;
    object-position: left center;
  }
  .pdf-manila-small {
    max-height: 18mm;
    height: auto;
    max-width: 40mm;
    opacity: 0.55;
    object-fit: contain;
    object-position: right center;
  }

  /* ---- BARRA DEBAJO DE LA LÍNEA: número + fecha + validez ---- */
  .pdf-quote-bar {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 4mm;
    padding-bottom: 2mm;
  }
  .pdf-quote-number { font-size: 11pt; font-weight: 800; color: var(--pdf-accent, #2F2C2B); }
  .pdf-quote-meta { display: flex; gap: 5mm; font-size: 7.5pt; color: #888; }
  .pdf-date, .pdf-valid { font-size: 7.5pt; color: #888; }

  /* ---- FOTO PRODUCTO — siempre visible, fallback de color brand ---- */
  .pdf-photo-wrap {
    width: 100%;
    height: 65mm;
    margin-bottom: 4mm;
    border-radius: 5px;
    overflow: hidden;
    background: var(--pdf-accent, #2F2C2B);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .pdf-photo-wrap.has-photo { background: transparent; }
  .pdf-product-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }

  /* ---- NOMBRE PRODUCTO — Playfair Display como fichas ---- */
  .pdf-product-block {
    margin-bottom: 4mm;
    border-bottom: 1px solid var(--pdf-accent, #2F2C2B);
    padding-bottom: 3mm;
  }
  .pdf-product-name {
    font-family: 'Playfair Display', Georgia, serif;
    font-style: italic;
    font-size: 20pt;
    font-weight: 700;
    margin-bottom: 1mm;
    line-height: 1.2;
    color: var(--pdf-accent, #2F2C2B);
  }
  .pdf-product-spec { font-size: 8pt; color: #666; letter-spacing: 0.2px; }

  /* ---- PRECIO: kg y lb al mismo nivel ---- */
  .pdf-price-block {
    background: var(--pdf-accent, #2F2C2B);
    color: #fff;
    border-radius: 8px;
    padding: 5mm 8mm;
    margin-bottom: 6mm;
  }
  .pdf-incoterm-label {
    font-size: 8.5pt;
    opacity: 1;
    font-weight: 700;
    margin-bottom: 2mm;
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }
  .pdf-prices-row {
    display: flex;
    align-items: center;
    gap: 0;
  }
  .pdf-price-unit {
    flex: 1;
    text-align: center;
  }
  .pdf-price-val {
    display: block;
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 28pt;
    font-weight: 700;
    letter-spacing: -0.5px;
    line-height: 1;
  }
  .pdf-price-unit-label {
    display: block;
    font-size: 9pt;
    opacity: 0.8;
    margin-top: 1mm;
  }
  .pdf-price-divider {
    font-size: 30pt;
    opacity: 0.25;
    padding: 0 4mm;
    line-height: 1;
  }

  /* ---- INFO GRID ---- */
  .pdf-info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3mm;
    margin-bottom: 5mm;
    font-size: 8.5pt;
  }
  .pdf-info-cell {
    border: 1px solid #e5e3e0;
    border-radius: 4px;
    padding: 2.5mm 3.5mm;
  }
  .pdf-info-cell .cell-label {
    font-weight: 700;
    color: #999;
    font-size: 7pt;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    margin-bottom: 0.8mm;
  }
  .pdf-info-cell .cell-val {
    font-size: 9pt;
    font-weight: 500;
    color: #2F2C2B;
    line-height: 1.3;
  }

  /* ---- CERTIFICACIONES ---- */
  .pdf-certs {
    display: flex;
    gap: 3mm;
    flex-wrap: wrap;
    margin-bottom: 5mm;
    align-items: center;
  }
  .pdf-cert-item {
    display: flex;
    align-items: center;
    gap: 2mm;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 2mm 4mm;
    font-size: 7.5pt;
  }
  .pdf-cert-item img { height: 30px; }
  .pdf-cert-badge {
    background: #f0f0f0;
    padding: 2px 7px;
    border-radius: 3px;
    font-weight: 700;
    font-size: 7.5pt;
    letter-spacing: 0.3px;
  }
  .pdf-cert-name { font-size: 8pt; color: #555; }

  /* ---- COMENTARIOS ---- */
  .pdf-comments {
    border-left: 3px solid var(--pdf-accent, #2F2C2B);
    padding: 3mm 4mm;
    margin-bottom: 5mm;
    background: #fafafa;
    border-radius: 0 4px 4px 0;
  }
  .pdf-comments-label {
    font-size: 7.5pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    color: #888;
    margin-bottom: 1.5mm;
  }
  .pdf-comments-text {
    font-size: 8.5pt;
    color: #444;
    line-height: 1.5;
    white-space: pre-wrap;
  }

  /* ---- FOOTER ---- */
  .pdf-footer {
    position: absolute;
    bottom: 8mm;
    left: 14mm;
    right: 14mm;
    border-top: 1px solid #e5e3e0;
    padding-top: 3mm;
    display: flex;
    justify-content: space-between;
    font-size: 7.5pt;
    color: #aaa;
  }

  /* ---- PÁGINA 2: INTERNA — padding compacto para entrar en 1 hoja ---- */
  .pdf-internal-page {
    padding: 9mm 12mm 15mm;
  }
  .pdf-internal-title {
    font-size: 12pt;
    font-weight: 700;
    margin-bottom: 3mm;
    padding-bottom: 2mm;
    border-bottom: 1px solid #e5e3e0;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
  }
  .pdf-internal-title .int-sub { font-size: 7.5pt; font-weight: 400; color: #888; }
  .pdf-int-alias {
    font-size: 9.5pt;
    font-weight: 400;
    color: #666;
    margin-left: 4mm;
    font-style: italic;
  }

  /* ---- LOGISTICS GRID (PDF interno) ---- */
  .pdf-int-logistics { margin-bottom: 3mm; }
  .pil-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2mm;
    font-size: 7pt;
  }
  .pil-cell {
    border: 1px solid #e5e3e0;
    border-radius: 3px;
    padding: 1.5mm 2.5mm;
    background: #fafafa;
  }
  .pil-label {
    font-weight: 700;
    color: #aaa;
    font-size: 6.5pt;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    margin-bottom: 0.5mm;
  }
  .pil-val {
    font-size: 7.5pt;
    font-weight: 500;
    color: #2F2C2B;
    line-height: 1.3;
  }

  .pdf-cost-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 7.5pt;
    margin-bottom: 4mm;
  }
  .pdf-cost-table th {
    background: #f2f1ef;
    padding: 2mm 3mm;
    text-align: left;
    font-size: 7pt;
    font-weight: 600;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }
  .pdf-cost-table td {
    padding: 1.5mm 3mm;
    border-bottom: 1px solid #f0eeec;
    vertical-align: middle;
  }
  .pdf-cost-table tr.layer-title td {
    background: #f9f9f8;
    font-weight: 700;
    font-size: 8pt;
    padding-top: 2mm;
  }
  .pdf-cost-table tr.subtotal td {
    font-weight: 600;
    background: #f2f1ef;
  }
  .pdf-cost-table tr.grand-total td {
    font-weight: 800;
    font-size: 9pt;
    background: #2F2C2B;
    color: #fff;
    padding: 2mm 3mm;
  }
  .pdf-cost-table .num { text-align: right; font-variant-numeric: tabular-nums; }

  /* ---- RESUMEN DE COSTOS (breakdown por capa) ---- */
  .pdf-cost-breakdown {
    border: 1px solid #e5e3e0;
    border-radius: 5px;
    padding: 2.5mm 4mm;
    margin-bottom: 3mm;
    font-size: 7.5pt;
  }
  .pdf-cost-breakdown-title {
    font-size: 7pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #888;
    margin-bottom: 2mm;
  }
  .pdf-breakdown-row {
    display: flex;
    justify-content: space-between;
    padding: 0.8mm 0;
    border-bottom: 1px solid #f2f1ef;
  }
  .pdf-breakdown-row:last-child { border-bottom: none; }
  .pdf-breakdown-row.separator { border-top: 1.5px solid #ccc; margin-top: 1mm; padding-top: 1.8mm; }
  .pdf-breakdown-row.total {
    font-weight: 800;
    font-size: 9.5pt;
    background: var(--pdf-accent, #2F2C2B);
    color: #fff;
    padding: 2mm 3mm;
    border-radius: 3px;
    margin-top: 1.5mm;
  }
  .pdf-breakdown-row .bd-label { color: #555; }
  .pdf-breakdown-row.separator .bd-label { color: #2F2C2B; font-weight: 700; }
  .pdf-breakdown-row .bd-val { font-weight: 600; font-variant-numeric: tabular-nums; }

  .pdf-summary-box {
    border: 2px solid #2F2C2B;
    border-radius: 6px;
    padding: 3mm 5mm;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 3mm;
    margin-bottom: 4mm;
    font-size: 8pt;
  }
  .pdf-summary-box .sum-cell .sum-label { font-size: 7pt; color: #888; font-weight: 600; text-transform: uppercase; }
  .pdf-summary-box .sum-cell .sum-val { font-size: 12pt; font-weight: 800; margin-top: 0.5mm; }
  .pdf-summary-box .sum-cell .sum-sub { font-size: 7.5pt; color: #888; }

  .pdf-rate-note {
    font-size: 8pt;
    font-weight: 600;
    color: #555;
    background: #f5f4f2;
    border: 1px solid #e5e3e0;
    border-radius: 4px;
    padding: 2mm 4mm;
    margin-bottom: 3mm;
    display: none;
  }
  .pdf-rate-note.visible {
    display: block;
  }
  .pdf-meta-footer {
    font-size: 7.5pt;
    color: #aaa;
    text-align: center;
    position: absolute;
    bottom: 8mm;
    left: 14mm;
    right: 14mm;
  }
}

/* ============================================================
   HISTORY PAGE
   ============================================================ */
.history-page { padding: 28px 40px; }
.history-page h1 { font-size: 20px; font-weight: 600; margin-bottom: 6px; }
.history-page .history-sub { color: var(--gray-500); font-size: 13px; margin-bottom: 24px; }

.history-filters {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  flex-wrap: wrap;
  align-items: center;
}
.history-filters input,
.history-filters select {
  padding: 7px 12px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  outline: none;
  background: #fff;
  transition: border-color 0.15s;
  color: var(--carbon);
}
.history-filters input:focus,
.history-filters select:focus { border-color: var(--accent); }
.history-filters input[type="text"] { min-width: 200px; }

.quotes-table {
  width: 100%;
  background: #fff;
  border-radius: 10px;
  border: 1px solid var(--gray-200);
  overflow: hidden;
  border-collapse: collapse;
}
.quotes-table th {
  background: var(--gray-50);
  padding: 10px 14px;
  text-align: left;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  color: var(--gray-500);
  border-bottom: 1px solid var(--gray-200);
}
.quotes-table td {
  padding: 12px 14px;
  font-size: 13px;
  border-bottom: 1px solid var(--gray-100);
  vertical-align: middle;
}
.quotes-table tr:last-child td { border-bottom: none; }
.quotes-table tr:hover td { background: var(--gray-50); }
.quotes-table tr { cursor: pointer; transition: background 0.1s; }

.quotes-table .num { font-variant-numeric: tabular-nums; font-weight: 500; }
.quotes-table .quote-number { font-weight: 700; color: var(--accent); }
.quotes-table .status-badge {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 500;
}
.status-badge.confirmed { background: #e6f4ea; color: #2d7a40; }
.status-badge.draft { background: #fef3e2; color: #b06400; }

/* Modal de detalle */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: 200;
  align-items: center;
  justify-content: center;
}
.modal-overlay.open { display: flex; }
.modal {
  background: #fff;
  border-radius: 12px;
  width: 820px;
  max-width: calc(100vw - 40px);
  max-height: calc(100vh - 60px);
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  display: flex;
  flex-direction: column;
}
.modal-header {
  padding: 20px 24px 16px;
  border-bottom: 1px solid var(--gray-200);
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: sticky;
  top: 0;
  background: #fff;
  z-index: 1;
}
.modal-header h2 { font-size: 17px; font-weight: 700; }
.modal-body { padding: 24px; flex: 1; }
.modal-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--gray-200);
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  position: sticky;
  bottom: 0;
  background: #fff;
}

.detail-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-bottom: 20px;
}
.detail-cell {
  padding: 10px 14px;
  background: var(--gray-50);
  border-radius: 6px;
  border: 1px solid var(--gray-100);
}
.detail-cell .dc-label { font-size: 10px; font-weight: 600; text-transform: uppercase; color: var(--gray-400); margin-bottom: 3px; }
.detail-cell .dc-val { font-size: 13px; font-weight: 500; }

.detail-price-block {
  background: var(--accent);
  color: #fff;
  border-radius: 8px;
  padding: 16px 20px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 20px;
}
.detail-price-block .dpr-incoterm { font-size: 11px; opacity: 0.75; }
.detail-price-block .dpr-kg { font-size: 26px; font-weight: 800; }
.detail-price-block .dpr-lb { font-size: 14px; opacity: 0.85; }
.detail-price-block .dpr-margin { margin-left: auto; font-size: 13px; opacity: 0.8; }

.detail-cost-section { margin-bottom: 16px; }
.detail-cost-section h4 {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  color: var(--gray-500);
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--gray-200);
  display: flex;
  justify-content: space-between;
}
.detail-cost-section h4 span { color: var(--accent); font-variant-numeric: tabular-nums; }

.detail-cost-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px 0;
  font-size: 12px;
  border-bottom: 1px solid var(--gray-100);
}
.detail-cost-item:last-child { border-bottom: none; }
.detail-cost-item .dci-name { color: var(--gray-700); flex: 1; }
.detail-cost-item .dci-source { font-size: 10px; color: var(--gray-400); margin-left: 8px; }
.detail-cost-item .dci-val { font-weight: 600; color: var(--accent); font-variant-numeric: tabular-nums; white-space: nowrap; }

/* ============================================================
   ADMIN PAGE
   ============================================================ */
.admin-page { padding: 28px 40px; }
.admin-page h1 { font-size: 20px; font-weight: 600; margin-bottom: 6px; }

.admin-tabs {
  display: flex;
  gap: 2px;
  margin-bottom: 24px;
  border-bottom: 2px solid var(--gray-200);
}
.admin-tab {
  padding: 9px 20px;
  border: none;
  background: none;
  font-size: 13px;
  font-family: var(--font);
  cursor: pointer;
  color: var(--gray-500);
  border-bottom: 2px solid transparent;
  margin-bottom: -2px;
  transition: all 0.15s;
}
.admin-tab.active { color: var(--accent); border-bottom-color: var(--accent); font-weight: 600; }
.admin-tab:hover:not(.active) { color: var(--carbon); }

.admin-tab-content { display: none; }
.admin-tab-content.active { display: block; }

.admin-list-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.admin-list-header h2 { font-size: 15px; font-weight: 600; }

.admin-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
  margin-bottom: 28px;
}
.admin-card {
  background: #fff;
  border: 1px solid var(--gray-200);
  border-radius: 8px;
  padding: 14px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.admin-card-thumb {
  width: 48px;
  height: 48px;
  border-radius: 6px;
  object-fit: cover;
  background: var(--gray-100);
  flex-shrink: 0;
}
.admin-card-body { flex: 1; min-width: 0; }
.admin-card-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.admin-card-sub { font-size: 11px; color: var(--gray-500); margin-top: 2px; }
.admin-card-actions { display: flex; gap: 6px; flex-shrink: 0; }

.admin-form-panel {
  background: #fff;
  border: 1px solid var(--gray-200);
  border-radius: 10px;
  padding: 24px;
  display: none;
  margin-bottom: 24px;
}
.admin-form-panel.open { display: block; }
.admin-form-panel h3 { font-size: 15px; font-weight: 600; margin-bottom: 20px; }

.admin-form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-bottom: 16px;
}
.admin-form-grid.single { grid-template-columns: 1fr; }
.admin-form-field label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  color: var(--gray-500);
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.admin-form-field input,
.admin-form-field select,
.admin-form-field textarea {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 13px;
  font-family: var(--font);
  color: var(--carbon);
  outline: none;
  transition: border-color 0.15s;
}
.admin-form-field input:focus,
.admin-form-field select:focus,
.admin-form-field textarea:focus { border-color: var(--accent); }
.admin-form-field textarea { min-height: 80px; resize: vertical; }

/* ─── Photo picker admin ─── */
.photo-picker { display: flex; gap: 12px; align-items: flex-start; }

.photo-picker-preview {
  width: 100px;
  height: 72px;
  border-radius: 6px;
  border: 2px dashed var(--gray-200);
  background: var(--gray-50);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  overflow: hidden;
}
.photo-picker-preview.has-photo { border-color: var(--accent); border-style: solid; }
.photo-picker-preview img { width: 100%; height: 100%; object-fit: cover; display: block; }
.photo-picker-empty { font-size: 11px; color: var(--gray-400); text-align: center; padding: 8px; }

.photo-picker-gallery {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  flex: 1;
}

.photo-pick-item {
  width: 72px;
  height: 52px;
  border-radius: 5px;
  overflow: hidden;
  border: 2px solid transparent;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s;
  background: var(--gray-100);
}
.photo-pick-item:hover { border-color: var(--accent); transform: scale(1.05); }
.photo-pick-item.selected { border-color: var(--green, #40543B); }
.photo-pick-item img { width: 100%; height: 100%; object-fit: cover; display: block; }

.photo-pick-none {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: var(--gray-400);
  border-style: dashed;
  border-color: var(--gray-200);
}
.photo-pick-none:hover { border-color: var(--orange); color: var(--orange); }
.photo-pick-none.selected { border-color: var(--gray-400); border-style: solid; }

.photo-pick-upload {
  display: flex; align-items: center; justify-content: center;
  border-style: dashed !important;
  color: var(--gray-400);
  font-size: 18px;
}
.photo-pick-upload:hover { border-color: var(--green) !important; color: var(--green); }
.photo-pick-upload.uploading { opacity: 0.5; pointer-events: none; }

.admin-form-actions {
  display: flex;
  gap: 10px;
  padding-top: 16px;
  border-top: 1px solid var(--gray-100);
}

.cert-checkboxes {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.cert-checkboxes label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  cursor: pointer;
  padding: 6px 12px;
  border: 1px solid var(--gray-200);
  border-radius: 4px;
  transition: all 0.12s;
  text-transform: none !important;
  letter-spacing: 0 !important;
}
.cert-checkboxes label:has(input:checked) {
  border-color: var(--accent);
  background: var(--accent-light);
  color: var(--accent);
}
.cert-checkboxes input[type="checkbox"] { accent-color: var(--accent); }

/* Suggestions */
.suggestions-bar {
  margin-top: 8px;
}
.btn-suggest {
  background: none;
  border: 1px solid var(--accent);
  color: var(--accent);
  font-size: 11px;
  font-family: var(--font);
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 6px;
  cursor: pointer;
  letter-spacing: 0.2px;
  transition: background 0.15s, color 0.15s;
}
.btn-suggest:hover {
  background: var(--accent);
  color: #fff;
}
.suggestions-list {
  display: flex;
  flex-direction: column;
  gap: 5px;
  margin-top: 8px;
}
.suggestion-chip {
  background: var(--surface);
  border: 1px solid var(--gray-200);
  border-radius: 6px;
  padding: 7px 11px;
  font-size: 11.5px;
  font-family: var(--font);
  color: var(--carbon);
  text-align: left;
  cursor: pointer;
  line-height: 1.5;
  transition: border-color 0.15s, background 0.15s;
}
.suggestion-chip:hover {
  border-color: var(--accent);
  background: var(--accent-light);
  color: var(--accent);
}

/* Cost tables admin */
.cost-table-item {
  display: grid;
  grid-template-columns: 1.5fr 1fr 80px 80px 80px 80px auto;
  gap: 8px;
  align-items: center;
  padding: 10px 14px;
  background: #fff;
  border: 1px solid var(--gray-200);
  border-radius: 6px;
  margin-bottom: 6px;
  font-size: 12px;
}
.cost-table-item .cti-name { font-weight: 500; }
.cost-table-item .cti-layer {
  font-size: 11px;
  color: var(--gray-500);
  background: var(--gray-100);
  padding: 2px 8px;
  border-radius: 20px;
  text-align: center;
}
.cost-table-item .cti-val { font-variant-numeric: tabular-nums; text-align: right; }

/* ============================================================
   UTILS
   ============================================================ */
.text-right { text-align: right; }
.text-muted { color: var(--gray-500); }
.text-small { font-size: 11px; }
.mt-4 { margin-top: 4px; }
.mt-8 { margin-top: 8px; }
.mt-16 { margin-top: 16px; }
.empty-state {
  text-align: center;
  padding: 40px;
  color: var(--gray-400);
  font-size: 13px;
}
.empty-state .empty-icon { font-size: 36px; margin-bottom: 10px; }

/* ============================================================
   CALIBRE BUILDER — admin de productos
   ============================================================ */
.caliber-field { grid-column: 1 / -1; }
.caliber-builder { display: flex; flex-direction: column; gap: 6px; margin-bottom: 6px; }
.caliber-empty { font-size: 12px; color: var(--gray-400); padding: 6px 0; }

.caliber-entry {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  padding: 6px 10px;
}
.caliber-entry .cal-min,
.caliber-entry .cal-max {
  width: 62px;
  text-align: center;
  padding: 4px 6px;
  border: 1px solid var(--gray-300);
  border-radius: 4px;
  font-size: 13px;
}
.caliber-entry .cal-dash { color: var(--gray-400); font-weight: 500; }
.caliber-entry .cal-unit {
  padding: 4px 6px;
  border: 1px solid var(--gray-300);
  border-radius: 4px;
  font-size: 13px;
  background: #fff;
}
.caliber-entry .cal-preview {
  flex: 1;
  font-size: 12px;
  font-weight: 500;
  color: var(--blue);
  font-variant-numeric: tabular-nums;
  text-align: right;
  padding-right: 4px;
}
.btn-add-caliber {
  align-self: flex-start;
  background: none;
  border: 1px dashed var(--gray-300);
  border-radius: var(--radius);
  color: var(--gray-500);
  padding: 5px 14px;
  font-size: 12px;
  cursor: pointer;
  transition: border-color 0.15s, color 0.15s;
}
.btn-add-caliber:hover { border-color: var(--accent); color: var(--accent); }

/* ============================================================
   YIELD EFECTIVO — header Proceso en Planta
   ============================================================ */
.layer-yield-effective {
  font-size: 10px;
  background: #e8f5e9;
  color: #2e7d32;
  padding: 2px 8px;
  border-radius: 20px;
  font-weight: 600;
}
.layer-yield-effective.undefined {
  background: var(--gray-100);
  color: var(--gray-500);
  font-weight: 400;
}

/* Campo Rdto% dentro de la fila de ítem */
.item-field.field-yield { min-width: 60px; max-width: 72px; }
.item-field.field-yield-placeholder { min-width: 60px; max-width: 72px; }

/* Anotación de rendimiento en la fila de Materia Prima del resumen */
.cost-summary-row .label { display: flex; flex-direction: column; gap: 1px; }
.yield-annotation {
  font-style: normal;
  font-size: 10px;
  font-weight: 400;
  color: var(--gray-500);
  font-variant-numeric: tabular-nums;
}

/* Columna de valor con total debajo */
.value-stack {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 1px;
}
.total-annotation {
  font-size: 10px;
  font-weight: 500;
  color: var(--green);
  font-variant-numeric: tabular-nums;
  font-style: normal;
  opacity: 0.85;
}
.total-annotation strong {
  font-weight: 700;
}

/* Subtotal Costo de mercadería */
.cost-summary-row.production-subtotal {
  background: var(--gray-100);
  border-top: 1px solid var(--gray-200);
  border-bottom: 1px solid var(--gray-200);
  margin: 2px 0;
  padding: 4px 8px;
  border-radius: 4px;
}
.cost-summary-row.production-subtotal .label {
  font-size: 11px;
  font-weight: 600;
  color: var(--green);
  flex-direction: row;
  align-items: center;
}
.cost-summary-row.production-subtotal .value {
  font-weight: 700;
  color: var(--green);
}

/* PDF breakdown: subtotal producción */
.pdf-breakdown-row.production-subtotal-pdf {
  background: #f0f7f0;
  border-top: 1px solid #c8e6c9;
  border-bottom: 1px solid #c8e6c9;
  padding: 1.5mm 0;
  margin: 1mm 0;
}
.pdf-breakdown-row.production-subtotal-pdf .bd-label { font-weight: 600; color: #2e7d32; }
.pdf-breakdown-row.production-subtotal-pdf .bd-val   { font-weight: 700; color: #2e7d32; }

/* ============================================================
   INCOTERM COVERAGE — checklist bajo el selector
   ============================================================ */
.incoterm-coverage {
  margin-top: 6px;
  padding: 8px 10px;
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius);
  font-size: 11px;
}
.incoterm-hint {
  color: var(--gray-700);
  margin-bottom: 6px;
  line-height: 1.4;
}
.incoterm-checklist {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}
.incoterm-check {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 2px 8px;
  border-radius: 20px;
  font-weight: 500;
  font-size: 10px;
}
.incoterm-check.ok {
  background: #e8f5e9;
  color: #2e7d32;
}
.incoterm-check.missing {
  background: var(--gray-100);
  color: var(--gray-500);
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 900px) {
  .quote-layout { flex-direction: column; height: auto; overflow: visible; }
  .quote-panel { width: 100%; min-width: 0; border-right: none; border-bottom: 1px solid var(--gray-200); }
  .quote-layers { padding: 16px; }
  .dash-cards { grid-template-columns: 1fr; }
  .cost-item { grid-template-columns: 1fr; }
  .cost-items-header { display: none; }
}
